common_packages = ["common/packages/cachyos_env.toml"]

[packages]
std = [
   "amd-ucode",
   "linux-firmware",

   "linux-cachyos",
   "linux-cachyos-lts",
   "wireless-regdb",

   # provided by chwd
   "lib32-opencl-mesa",
   "xf86-video-amdgpu",

   "ufw",
   "lact",
   "bluez",
   "bluez-utils",
]

[[spawn_files]]
content = "WIRELESS_REGDOM=\"ES\""
owner = "root"
target = "/etc/conf.d/wireless-regdom"

[[spawn_files]]
content = """
[Match]
Name=eno1

[Network]
DHCP=yes

[DHCPv4]
RouteMetric=100

[IPv6AcceptRA]
RouteMetric=100
"""
owner = "root"
target = "/etc/systemd/network/20-wired.network"

[[spawn_files]]
content = """
[Match]
Name=wlan0

[Network]
DHCP=yes

[DHCPv4]
RouteMetric=600

[IPv6AcceptRA]
RouteMetric=600
"""
owner = "root"
target = "/etc/systemd/network/21-wireless.network"

[[spawn_files]]
content = """
[Resolve]
DNS=1.1.1.1
FallbackDNS=1.0.0.1
"""
owner = "root"
target = "/etc/resolved.conf"

[[spawn_files]]
content = """
LANG=en_IE.UTF-8
LC_ADDRESS=en_IE.UTF-8
LC_IDENTIFICATION=en_IE.UTF-8
LC_MEASUREMENT=en_IE.UTF-8
LC_MONETARY=en_IE.UTF-8
LC_NAME=en_IE.UTF-8
LC_NUMERIC=en_IE.UTF-8
LC_PAPER=en_IE.UTF-8
LC_TELEPHONE=en_IE.UTF-8
LC_TIME=en_IE.UTF-8
"""
owner = "root"
target = "/etc/locale.conf"

[[spawn_files]]
content = """
en_IE.UTF-8 UTF-8
"""
owner = "root"
target = "/etc/locale.gen"

[[install_files]]
operation = "copy"
owner = "root"
source = "common/files/screen_off_service/screen_off.service"
target_path = "/etc/systemd/system"

[[install_files]]
operation = "copy"
owner = "root"
source = "common/files/screen_off_service/screen_off.fish"
target_path = "/usr/local/bin"

[services]
enable = [
   "getty@tty1",

   "systemd-networkd",
   "systemd-network-generator",
   "systemd-networkd-wait-online",
   "systemd-resolved",
   "iwd",

   "systemd-timesyncd",

   "lactd",
   "ufw",
   "screen_off",
   "ananicy-cpp",
]

[ignore]
packages = ["sbctl"]
